<%- include('./partials/header') %>
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/pages/notifications.css">

<div class="main-content">
  <h1 class="mb-4">การแจ้งเตือน</h1>
  
  <% if (!notifications || notifications.length === 0) { %>
    <div class="alert alert-info">
      <i class="bi bi-info-circle"></i> ไม่มีการแจ้งเตือน
    </div>
  <% } else { %>
    <div class="notifications-list">
      <% notifications.forEach(notification => { %>
        <div class="notification-item card mb-3 <%= notification.is_read ? '' : 'unread' %>">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <p class="mb-0"><%= notification.message %></p>
              <small class="text-muted"><%= new Date(notification.created_at).toLocaleString() %></small>
            </div>
            <% if (!notification.is_read) { %>
              <form action="/notifications/api/notifications/<%= notification.id %>/read" method="POST" class="mt-2">
                <button type="submit" class="btn btn-sm btn-outline-primary">ทำเครื่องหมายว่าอ่านแล้ว</button>
              </form>
            <% } %>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>

  <% if (typeof page !== 'undefined' && typeof totalPages !== 'undefined' && totalPages > 1) { %>
    <nav aria-label="Pagination" class="mt-3">
      <ul class="pagination">
        <li class="page-item <%= page <= 1 ? 'disabled' : '' %>"><a class="page-link" href="/notifications?page=<%= page - 1 %>">ก่อนหน้า</a></li>
        <% for (let p = 1; p <= totalPages; p++) { %>
          <li class="page-item <%= p === page ? 'active' : '' %>"><a class="page-link" href="/notifications?page=<%= p %>"><%= p %></a></li>
        <% } %>
        <li class="page-item <%= page >= totalPages ? 'disabled' : '' %>"><a class="page-link" href="/notifications?page=<%= page + 1 %>">ถัดไป</a></li>
      </ul>
    </nav>
  <% } %>
</div> 