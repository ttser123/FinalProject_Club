<%- include('../partials/header') %>
<link rel="stylesheet" href="/css/main.css">

<div class="main-content">
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
    <h1 class="h3 mb-0">แดชบอร์ดสมาชิก</h1>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-12 col-sm-6 col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body d-flex align-items-center justify-content-between">
          <div>
            <div class="text-muted">ชมรมที่เป็นสมาชิก</div>
            <div class="fs-3 fw-bold"><%= clubCount %></div>
          </div>
          <i class="bi bi-people fs-1 text-primary"></i>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-6 col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body d-flex align-items-center justify-content-between">
          <div>
            <div class="text-muted">กิจกรรมที่เข้าร่วม</div>
            <div class="fs-3 fw-bold"><%= joinedActivities %></div>
          </div>
          <i class="bi bi-calendar-event fs-1 text-success"></i>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-6 col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body d-flex align-items-center justify-content-between">
          <div>
            <div class="text-muted">คะแนน</div>
            <div class="fs-3 fw-bold"><%= points %></div>
          </div>
          <i class="bi bi-star fs-1 text-warning"></i>
        </div>
      </div>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="mb-3">ข่าวสารล่าสุดจากชมรมของคุณ</h5>
      <% if (!latestNews || latestNews.length === 0) { %>
        <div class="text-muted">ยังไม่มีข่าวสารล่าสุด</div>
      <% } else { %>
        <div class="list-group">
          <% latestNews.forEach(n => { %>
            <a class="list-group-item list-group-item-action" href="/posts/<%= n.post_id %>">
              <div class="d-flex w-100 justify-content-between">
                <h6 class="mb-1"><%= n.title %> • <small class="text-muted"><%= n.club_title %></small></h6>
                <small class="text-muted"><%= new Date(n.created_at).toLocaleString() %></small>
              </div>
              <p class="mb-1 text-muted"><%= (n.content || '').substring(0, 140) %>...</p>
            </a>
          <% }) %>
        </div>
      <% } %>
    </div>
  </div>
</div>


